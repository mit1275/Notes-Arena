{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\5thsemprojects\\\\Nodejs_Mongodb_Express_Multer\\\\Loco-Cart-Frontend-beef6b1281e0f97f6bd874476368f4fd52163902\\\\src\\\\components\\\\Screens\\\\BiddingScreenSeller\\\\BiddingScreenSeller.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './BiddingScreenSeller.css';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport GavelIcon from '@material-ui/icons/Gavel';\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst jwt = require('jsonwebtoken');\n\ntoast.configure();\nconst months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nexport default function BiddingScreenSeller(props) {\n  _s();\n\n  const [bidSummary, setBidSummary] = useState({});\n  const [products, setProducts] = useState([]);\n  const [sellers, setSellers] = useState([]);\n  const [price, setPrice] = useState(0);\n  const [id, setId] = useState(undefined);\n  const [bidId, setBidId] = useState(undefined);\n  const [update, setUpdate] = useState(0);\n  const history = useHistory();\n  useEffect(() => {\n    try {\n      const decodedToken = jwt.verify(localStorage.getItem(\"sellerjwt\"), process.env.REACT_APP_JWT_SECRET);\n      setId(decodedToken._id);\n      console.log(decodedToken);\n      fetch('http://localhost:3001/api/bid/' + props.match.params.id, {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          sellerId: decodedToken._id\n        })\n      }).then(res => res.json()).then(result => {\n        console.log(result);\n\n        if (result.message === \"Success\") {\n          setBidId(result.bid._id);\n          setBidSummary({\n            totalItems: result.products.length,\n            currentMinBid: result.sellers[0].biddingPrice,\n            status: (Date.now() - new Date(result.bid.orderedAt)) / (1000 * 60) < 180 ? \"Ongoing\" : \"Expired\",\n            bidDate: months[new Date(result.bid.orderedAt).getMonth()] + \" \" + new Date(result.bid.orderedAt).getDate() + \", \" + new Date(result.bid.orderedAt).getFullYear(),\n            timeRemaining: (Date.now() - new Date(result.bid.orderedAt)) / (1000 * 60) < 180 ? 180 - ((Date.now() - new Date(result.bid.orderedAt)) / (1000 * 60)).toFixed(0) + \" minutes\" : \"---\"\n          });\n          setProducts(result.products);\n          setSellers(result.sellers);\n        } else {\n          history.push(\"/error\");\n        }\n      });\n    } catch (err) {\n      console.log(err);\n      toast.error(\"Please login first !\", {\n        position: toast.POSITION.TOP_CENTER,\n        autoClose: 1500\n      });\n      history.push(\"/sellersignin\");\n    }\n  }, [update]);\n\n  const PostBid = () => {\n    if (price < bidSummary.currentMinBid) {\n      fetch('http://localhost:3001/api/bid/placebid', {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          price: price,\n          sellerId: id,\n          bidId: bidId\n        })\n      }).then(res => res.json()).then(result => {\n        if (result.message === \"Success\") {\n          toast.success(\"Successfully placed bid !\", {\n            position: toast.POSITION.TOP_CENTER,\n            autoClose: 1500\n          });\n          setUpdate(update + 1);\n        } else {\n          toast.error(result.message, {\n            position: toast.POSITION.TOP_CENTER,\n            autoClose: 1500\n          });\n        }\n      });\n    } else {\n      toast.error(\"Please enter a price lesser than the current minimum bid !\", {\n        position: toast.POSITION.TOP_CENTER,\n        autoClose: 2000\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      paddingLeft: \"10px\",\n      paddingRight: \"10px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bidding_screen_all_content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bidding_screen_heading\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"BIDDING SCREEN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bidding_screen_body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginTop: \"10px\",\n            marginBottom: \"10px\"\n          },\n          children: \"BID SUMMARY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          style: {\n            padding: \"8px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 12,\n            md: 6,\n            md: 6,\n            style: {\n              textAlign: \"left\",\n              borderBottom: \"1px solid gray\",\n              padding: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"bid_summary\",\n              children: [\"TOTAL ITEMS : \", bidSummary.totalItems]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"bid_summary\",\n              children: [\"CURRENT MIN BID: \\u20B9\", bidSummary.currentMinBid]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"bid_summary\",\n              children: [\"BID STATUS: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: bidSummary.status === \"Ongoing\" ? \"status_green\" : \"status_red\",\n                children: bidSummary.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 65\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 12,\n            md: 6,\n            md: 6,\n            style: {\n              textAlign: \"left\",\n              borderBottom: \"1px solid gray\",\n              padding: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"bid_summary\",\n              children: [\"BID DATE : \", bidSummary.bidDate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"bid_summary\",\n              children: [\"TIME REMAINING : \", bidSummary.timeRemaining]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 25\n            }, this), bidSummary.status === \"Ongoing\" ? /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              style: {\n                marginTop: \"10px\",\n                marginBottom: \"10px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 6,\n                sm: 6,\n                md: 6,\n                lg: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  type: \"number\",\n                  variant: \"outlined\",\n                  label: \"Enter bid amount\",\n                  style: {\n                    width: \"100%\"\n                  },\n                  value: price,\n                  onChange: e => {\n                    setPrice(Number(e.target.value));\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                style: {\n                  padding: \"8px\"\n                },\n                item: true,\n                xs: 6,\n                sm: 6,\n                md: 6,\n                lg: 6,\n                onClick: () => {\n                  PostBid();\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bid_button\",\n                  children: [/*#__PURE__*/_jsxDEV(GavelIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 41\n                  }, this), \"Bid Now\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"LIST OF ITEMS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this), products.map(data => {\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            style: {\n              padding: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                borderBottom: \"1.5px solid gray\"\n              },\n              item: true,\n              xs: 12,\n              sm: 12,\n              md: 6,\n              lg: 4,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: data.image,\n                style: {\n                  borderRadius: \"10px\",\n                  width: \"100%\",\n                  height: \"220px\",\n                  marginTop: \"10px\",\n                  marginLeft: \"auto\",\n                  marginRight: \"auto\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                textAlign: \"left\",\n                padding: \"10px\",\n                borderBottom: \"1.5px solid gray\"\n              },\n              item: true,\n              xs: 12,\n              sm: 12,\n              md: 6,\n              lg: 8,\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"item_details\",\n                children: [\"NAME : \", data.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"item_details\",\n                children: [\"CATEGORY : \", data.category]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"item_details\",\n                children: [\"QUANTITY : \", data.quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 29\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"LIST OF BIDDING SELLERS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this), sellers.map(data => {\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            style: {\n              maxWidth: \"560px\",\n              marginLeft: \"auto\",\n              marginRight: \"auto\",\n              paddingLeft: \"10px\",\n              paddingRight: \"10px\"\n            },\n            container: true,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                borderBottom: \"1px solid gray\"\n              },\n              item: true,\n              xs: 3,\n              sm: 3,\n              md: 3,\n              lg: 3,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: data.image,\n                style: {\n                  borderRadius: \"50%\",\n                  width: \"60px\",\n                  height: \"60px\",\n                  marginTop: \"10px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                borderBottom: \"1px solid gray\",\n                textAlign: \"left\"\n              },\n              item: true,\n              xs: 9,\n              sm: 9,\n              md: 9,\n              lg: 9,\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  marginTop: \"10px\"\n                },\n                children: data.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  marginTop: \"10px\"\n                },\n                children: [\"BIDDING PRICE : \\u20B9\", data.biddingPrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 29\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BiddingScreenSeller, \"05rhio+B5GzzaZ/LESk7Z91YePs=\", false, function () {\n  return [useHistory];\n});\n\n_c = BiddingScreenSeller;\n\nvar _c;\n\n$RefreshReg$(_c, \"BiddingScreenSeller\");","map":{"version":3,"sources":["D:/5thsemprojects/Nodejs_Mongodb_Express_Multer/Loco-Cart-Frontend-beef6b1281e0f97f6bd874476368f4fd52163902/src/components/Screens/BiddingScreenSeller/BiddingScreenSeller.js"],"names":["useState","useEffect","useHistory","Grid","TextField","GavelIcon","toast","jwt","require","configure","months","BiddingScreenSeller","props","bidSummary","setBidSummary","products","setProducts","sellers","setSellers","price","setPrice","id","setId","undefined","bidId","setBidId","update","setUpdate","history","decodedToken","verify","localStorage","getItem","process","env","REACT_APP_JWT_SECRET","_id","console","log","fetch","match","params","method","headers","body","JSON","stringify","sellerId","then","res","json","result","message","bid","totalItems","length","currentMinBid","biddingPrice","status","Date","now","orderedAt","bidDate","getMonth","getDate","getFullYear","timeRemaining","toFixed","push","err","error","position","POSITION","TOP_CENTER","autoClose","PostBid","success","paddingLeft","paddingRight","marginTop","marginBottom","padding","textAlign","borderBottom","width","e","Number","target","value","map","data","image","borderRadius","height","marginLeft","marginRight","name","category","quantity","maxWidth"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport './BiddingScreenSeller.css';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport GavelIcon from '@material-ui/icons/Gavel';\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst jwt = require('jsonwebtoken');\n\ntoast.configure();\n\nconst months = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\n\nexport default function BiddingScreenSeller(props){\n    const [bidSummary, setBidSummary] = useState({});\n    const [products, setProducts] = useState([]);\n    const [sellers, setSellers] = useState([]);\n    const [price, setPrice] = useState(0);\n    const [id, setId] = useState(undefined);\n    const [bidId, setBidId] = useState(undefined);\n    const [update, setUpdate] = useState(0);\n    const history = useHistory();\n\n    useEffect(()=>{\n        try{\n            const decodedToken = jwt.verify(localStorage.getItem(\"sellerjwt\"), process.env.REACT_APP_JWT_SECRET);\n            setId(decodedToken._id);\n            console.log(decodedToken)\n            fetch(\n                'http://localhost:3001/api/bid/'+props.match.params.id,\n                {\n                    method:\"post\",\n                    headers:{\n                        \"Content-Type\":\"application/json\"\n                    },\n                    body: JSON.stringify({\n                        sellerId: decodedToken._id\n                    })\n                }\n            ).then(res=>res.json())\n            .then(result=>{\n                console.log(result);\n                if(result.message===\"Success\"){\n                    setBidId(result.bid._id);\n                    setBidSummary({\n                        totalItems: result.products.length,\n                        currentMinBid: result.sellers[0].biddingPrice,\n                        status: (Date.now()-new Date(result.bid.orderedAt))/(1000*60)<180?\"Ongoing\":\"Expired\",\n                        bidDate: months[new Date(result.bid.orderedAt).getMonth()]+\" \"+new Date(result.bid.orderedAt).getDate()+\", \"+new Date(result.bid.orderedAt).getFullYear(),\n                        timeRemaining: (Date.now()-new Date(result.bid.orderedAt))/(1000*60)<180?180-((Date.now()-new Date(result.bid.orderedAt))/(1000*60)).toFixed(0)+\" minutes\":\"---\"\n                    });\n                    setProducts(result.products);\n                    setSellers(result.sellers);\n                }else{\n                    history.push(\"/error\")\n                }\n                \n            })\n        }catch(err){\n            console.log(err);\n            toast.error(\"Please login first !\", {\n                position: toast.POSITION.TOP_CENTER,\n                autoClose: 1500,\n            });\n            history.push(\"/sellersignin\")\n        }\n    },[update]);\n\n    const PostBid = ()=>{\n        if(price < bidSummary.currentMinBid){\n            fetch('http://localhost:3001/api/bid/placebid',\n            {\n                method:\"post\",\n                headers:{\n                    \"Content-Type\":\"application/json\"\n                },\n                body: JSON.stringify({\n                    price: price,\n                    sellerId: id,\n                    bidId: bidId\n                })\n            }).then(res=>res.json())\n            .then(result=>{\n                if(result.message===\"Success\"){\n                    toast.success(\"Successfully placed bid !\", {\n                        position: toast.POSITION.TOP_CENTER,\n                        autoClose: 1500,\n                    });\n                    setUpdate(update+1);\n                }else{\n                    toast.error(result.message, {\n                        position: toast.POSITION.TOP_CENTER,\n                        autoClose: 1500,\n                    });\n                }\n            })\n        }else{\n            toast.error(\"Please enter a price lesser than the current minimum bid !\", {\n                position: toast.POSITION.TOP_CENTER,\n                autoClose: 2000,\n            });\n        }\n    }\n\n    return(\n        <div style={{paddingLeft:\"10px\",paddingRight:\"10px\"}}>\n        <div className=\"bidding_screen_all_content\">\n            <div className=\"bidding_screen_heading\">\n                <h1>BIDDING SCREEN</h1>\n            </div>\n            <div className=\"bidding_screen_body\">\n                <h1 \n                style={{\n                    marginTop:\"10px\",\n                    marginBottom:\"10px\"}}\n                >BID SUMMARY</h1>\n                <Grid container\n                style={{padding:\"8px\"}}>\n                    <Grid item xs={12} sm={12} md={6} md={6}\n                    style={{\n                        textAlign:\"left\",\n                        borderBottom:\"1px solid gray\",\n                        padding:\"5px\",\n                    }}>\n                        <h3 className=\"bid_summary\">TOTAL ITEMS : {bidSummary.totalItems}</h3>\n                        <h3 className=\"bid_summary\">CURRENT MIN BID: ₹{bidSummary.currentMinBid}</h3>\n                        <h3 className=\"bid_summary\">BID STATUS: <span className={bidSummary.status===\"Ongoing\"?\"status_green\":\"status_red\"}>{bidSummary.status}</span></h3>\n                    </Grid>\n                    <Grid item xs={12} sm={12} md={6} md={6}\n                    style={{\n                        textAlign:\"left\",\n                        borderBottom:\"1px solid gray\",\n                        padding:\"5px\",\n                    }}>\n                        <h3 className=\"bid_summary\">BID DATE : {bidSummary.bidDate}</h3>\n                        <h3 className=\"bid_summary\">TIME REMAINING : {bidSummary.timeRemaining}</h3>\n                        {\n                            bidSummary.status===\"Ongoing\"\n                            ?\n                            <Grid container\n                            style={{marginTop:\"10px\",marginBottom:\"10px\"}}>\n                                <Grid item xs={6} sm={6} md={6} lg={6}>\n                                    <TextField\n                                    type=\"number\"\n                                    variant=\"outlined\"\n                                    label=\"Enter bid amount\"\n                                    style={{width:\"100%\"}}\n                                    value={price}\n                                    onChange={(e)=>{setPrice(Number(e.target.value))}}></TextField>\n                                </Grid>\n                                <Grid\n                                style={{padding:\"8px\"}} item xs={6} sm={6} md={6} lg={6}\n                                onClick={()=>{PostBid()}}>\n                                    <div\n                                    className=\"bid_button\">\n                                        <GavelIcon></GavelIcon>\n                                        Bid Now\n                                    </div>\n                                </Grid>\n                            </Grid>\n                            :\n                            <div></div>\n                        }\n                        \n                    </Grid>\n                </Grid>\n                \n                <h1>LIST OF ITEMS</h1>\n                \n                {\n                    products.map(data=>{\n                        return(\n                            <Grid container\n                            style={{padding:\"5px\"}}>\n                                <Grid\n                            style={{\n                                borderBottom:\"1.5px solid gray\"\n                            }} \n                            item xs={12} sm={12} md={6} lg={4}>\n                                <img src={data.image}\n                                    style={{\n                                        borderRadius:\"10px\",\n                                        width:\"100%\",\n                                        height:\"220px\",\n                                        marginTop:\"10px\",\n                                        marginLeft:\"auto\",\n                                        marginRight:\"auto\",\n                                    }}\n                                />\n                            </Grid>\n                            <Grid style={{\n                                textAlign:\"left\",\n                                padding:\"10px\",\n                                borderBottom:\"1.5px solid gray\"}} \n                                item xs={12} sm={12} md={6} lg={8}>\n                                <h2 className=\"item_details\">NAME : {data.name}</h2>\n                                <h2 className=\"item_details\">CATEGORY : {data.category}</h2>\n                                <h2 className=\"item_details\">QUANTITY : {data.quantity}</h2>\n                            </Grid>\n                            </Grid>\n                        )\n                    })\n                }\n                \n                \n                <h1>LIST OF BIDDING SELLERS</h1>\n                {\n                    sellers.map(data=>{\n                        return(\n                            <Grid\n                            style={{maxWidth:\"560px\",\n                            marginLeft:\"auto\",\n                            marginRight:\"auto\",\n                            paddingLeft:\"10px\",\n                            paddingRight:\"10px\"}}\n                            container>\n                                <Grid \n                                style={{borderBottom:\"1px solid gray\"}} \n                                item xs={3} sm={3} md={3} lg={3}>\n                                    <img src={data.image}\n                                    style={{\n                                        borderRadius:\"50%\",\n                                        width:\"60px\",\n                                        height:\"60px\",\n                                        marginTop:\"10px\"\n                                    }}/>\n                                </Grid>\n                                <Grid \n                                style={{borderBottom:\"1px solid gray\",\n                                textAlign:\"left\"}}  \n                                item xs={9} sm={9} md={9} lg={9}>\n                                    <h3\n                                    style={{\n                                        marginTop:\"10px\"\n                                    }}>{data.name}</h3>\n                                    <h4\n                                    style={{\n                                        marginTop:\"10px\"\n                                    }}>BIDDING PRICE : ₹{data.biddingPrice}</h4>\n                                </Grid>\n                            </Grid>\n                        )\n                    })\n                }\n                    \n            </div>\n        </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}