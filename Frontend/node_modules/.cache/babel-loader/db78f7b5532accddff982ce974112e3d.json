{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\5thsemprojects\\\\Nodejs_Mongodb_Express_Multer\\\\Loco-Cart-Frontend-beef6b1281e0f97f6bd874476368f4fd52163902\\\\src\\\\components\\\\Screens\\\\Notification\\\\Bes.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./Besa.css\";\nimport Axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst jwt = require(\"jsonwebtoken\");\n\ntoast.configure();\n\nfunction sleep(time) {\n  return new Promise(resolve => setTimeout(resolve, time));\n}\n\nconst times = new Date().toLocaleTimeString();\n\nconst Notifications = () => {\n  _s();\n\n  const history = useHistory();\n  const [notifications, setNotifications] = React.useState([]);\n  React.useEffect(async () => {\n    try {\n      const jwtToken = await localStorage.getItem(\"CustomerJwt\");\n      console.log(jwt);\n      const user = await jwt.verify(jwtToken, process.env.REACT_APP_JWT_SECRET);\n\n      if (user) {\n        console.log(user);\n        const resp = await Axios.get(`http://localhost:3001/api/notification/${user._id}`).then(function (response) {\n          console.log(response);\n\n          if (response.data.message === \"Success\") {\n            setNotifications(response.data.notification.notifications);\n            toast.success(\"Sweet !\", {\n              position: toast.POSITION.TOP_CENTER,\n              autoClose: 1500\n            });\n          } else if (response.data.message === \"Your cart is empty\") {\n            toast.warning(\"No notifications for now !!!\", {\n              position: toast.POSITION.TOP_CENTER,\n              autoClose: 1500\n            });\n          } else {\n            toast.error(\"Something went wrong !!!\", {\n              position: toast.POSITION.TOP_CENTER,\n              autoClose: 1500\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      } else {\n        toast.error(\"Please signin to see notifications !!!\", {\n          position: toast.POSITION.TOP_CENTER,\n          autoClose: 1500\n        });\n        sleep(2000).then(() => {\n          history.push(\"/signin\");\n          window.location.reload(false);\n        });\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"10px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container pb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-3\",\n          children: notifications.reverse().map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"horizontal-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: notification.image,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"horizontal-card-body\",\n              style: {\n                width: \"100%\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"orders\",\n                style: {\n                  width: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"name\",\n                    style: {\n                      float: \"left\"\n                    },\n                    children: notification.heading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 79,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    float: \"right\"\n                  },\n                  children: \"Time:\" + notification.timeStamp.slice(12, 19) + \"  Date:\" + notification.timeStamp.slice(0, 10)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"order\",\n                  children: notification.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: notification.link,\n                  children: \"Click Here\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Notifications, \"+II5axr6k56gJjHtx3jVi2edDfg=\", false, function () {\n  return [useHistory];\n});\n\n_c = Notifications;\nexport default Notifications;\n\nvar _c;\n\n$RefreshReg$(_c, \"Notifications\");","map":{"version":3,"sources":["D:/5thsemprojects/Nodejs_Mongodb_Express_Multer/Loco-Cart-Frontend-beef6b1281e0f97f6bd874476368f4fd52163902/src/components/Screens/Notification/Bes.jsx"],"names":["React","Axios","useHistory","toast","jwt","require","configure","sleep","time","Promise","resolve","setTimeout","times","Date","toLocaleTimeString","Notifications","history","notifications","setNotifications","useState","useEffect","jwtToken","localStorage","getItem","console","log","user","verify","process","env","REACT_APP_JWT_SECRET","resp","get","_id","then","response","data","message","notification","success","position","POSITION","TOP_CENTER","autoClose","warning","error","catch","push","window","location","reload","e","height","reverse","map","image","width","float","heading","timeStamp","slice","description","link"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Besa.css\";\r\nimport Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nconst jwt = require(\"jsonwebtoken\");\r\n\r\ntoast.configure();\r\n\r\nfunction sleep(time) {\r\n  return new Promise((resolve) => setTimeout(resolve, time));\r\n}\r\n\r\nconst times = new Date().toLocaleTimeString();\r\nconst Notifications = () => {\r\n  const history = useHistory();\r\n  const [notifications, setNotifications] = React.useState([]);\r\n  React.useEffect(async () => {\r\n    try {\r\n      const jwtToken = await localStorage.getItem(\"CustomerJwt\");\r\n      console.log(jwt);\r\n      const user = await jwt.verify(jwtToken, process.env.REACT_APP_JWT_SECRET);\r\n\r\n      if (user) {\r\n        console.log(user);\r\n        const resp = await Axios.get(\r\n          `http://localhost:3001/api/notification/${user._id}`\r\n        )\r\n          .then(function (response) {\r\n            console.log(response);\r\n            if (response.data.message === \"Success\") {\r\n              setNotifications(response.data.notification.notifications);\r\n              toast.success(\"Sweet !\", {\r\n                position: toast.POSITION.TOP_CENTER,\r\n                autoClose: 1500,\r\n              });\r\n            } else if (response.data.message === \"Your cart is empty\") {\r\n              toast.warning(\"No notifications for now !!!\", {\r\n                position: toast.POSITION.TOP_CENTER,\r\n                autoClose: 1500,\r\n              });\r\n            } else {\r\n              toast.error(\"Something went wrong !!!\", {\r\n                position: toast.POSITION.TOP_CENTER,\r\n                autoClose: 1500,\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n          });\r\n      } else {\r\n        toast.error(\"Please signin to see notifications !!!\", {\r\n          position: toast.POSITION.TOP_CENTER,\r\n          autoClose: 1500,\r\n        });\r\n        sleep(2000).then(() => {\r\n          history.push(\"/signin\");\r\n          window.location.reload(false);\r\n        });\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <div style={{ height: \"10px\" }}></div>\r\n      <div className=\"container pb-4\">\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-3\">\r\n            {notifications.reverse().map((notification) => (\r\n              <div className=\"horizontal-card\">\r\n                <img src={notification.image} alt=\"\" />\r\n                <div className=\"horizontal-card-body\" style={{ width: \"100%\" }}>\r\n                  <div className=\"orders\" style={{ width: \"100%\" }}>\r\n                    <div>\r\n                      <p className=\"name\" style={{ float: \"left\" }}>\r\n                        {notification.heading}\r\n                      </p>\r\n                    </div>\r\n                    <div style={{ float: \"right\" }}>\r\n                      {\"Time:\" +\r\n                        notification.timeStamp.slice(12, 19) +\r\n                        \"  Date:\" +\r\n                        notification.timeStamp.slice(0, 10)}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"order\">{notification.description}</p>\r\n                  </div>\r\n\r\n                  <div className=\"profile\">\r\n                    <a href={notification.link}>Click Here</a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Notifications;\r\n"]},"metadata":{},"sourceType":"module"}